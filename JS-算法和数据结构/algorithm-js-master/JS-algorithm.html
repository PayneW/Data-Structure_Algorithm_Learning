<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS-部分算法</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        #container {
            width: 600px;
            height: 200px;
            background: lightblue;
            border: 4px;
            margin: 20px auto;
        }
    </style>
</head>
<body>

<div id="container">

</div>

<script>
    // - 数组去重 unique /juː'niːk/ adj. 唯一的，独一无二的
    (function() {
        // - 1st method
        function unique(arr) {
            const temporary = [];
            arr.forEach(function (item) {
                if (temporary.indexOf(item) === -1) {
                    temporary.push(item);
                }
            });
            return temporary;
        }
        console.dir(unique([1, 1, 3, 5, 3, 2, 6, 1]));

        // - 2nd method
        function unique2(arr) {
            return [...new Set(arr)];
        }
        console.log(unique2([1, 1, 3, 5, 3, 2, 6, 1]));

        // - 3rd method
        function unique3(arr) {
            // filter() ：对数组中的每一项运行给定函数，返回该函数会返回 true 的项组成的数组。
            return arr.filter((item, index, array) => {
                // 数组的 lastIndexOf(): 从数组的末尾向开头开始查找
                return index === array.lastIndexOf(item);
            })
        }
        // ["b", "d", "f", "a", "c"]
        console.log(unique3(["a", "d", "f", "b", "d", "f", "a", "c"]));

        // - 注: 双(多)数组去重，第一步把数组用 concat() 合并才是合理的
    })();



    // - 斐波那契数列
    // - 1st method
    (function() {
        function fibonacci1(n) {
            if (n === 1 || n === 2) return 1;
            console.log("n: ", n);
            // - Q: 为什么这里的两个 fibonacci1(n-1) + fibonacci1(n-2) 可以一直执行?
            //   A: 因为 return 返回一个调用的闭包，闭包执行的原则是 n 只要不等于...?
            return fibonacci1(n - 1) + fibonacci1(n - 2)
        }
        console.log("fibonacci1(10)", fibonacci1(10));  // 輸出？

        // - 2nd method
        function fibonacci2(n) {
            let n1 = 1;
            let n2 = 1;
            let sum = 1;
            for (let i = 3; i <= n; i++) {
                sum = n1 + n2;
                n1 = n2;
                n2 = sum
            }
            return sum
        }
        console.log("fibonacci2(10)", fibonacci2(10));

        // - 3rd method 尾递归调用
        function fibonacci3(n) {
            return function (fn) {
                return fn(n, 0, 1, fn)
            }((n, ret1, ret2, f) => {
                if (n === 0) return ret1;
                return f(n - 1, ret2, ret1 + ret2, f)
            })
        }
        // console.log(fibonacci3(10));

        // - 来自 <学习 JavaScript 数据结构与算法> (第 2 版)
        // - 求 斐波那契数列的前 20 个数字. (待写)

        
    })();

</script>
</body>
</html>
