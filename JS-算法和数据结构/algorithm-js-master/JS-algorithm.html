<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>JS-部分算法</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        #container {
            width: 600px;
            height: 200px;
            background: lightblue;
            border: 4px;
            margin: 20px auto;
        }
    </style>
</head>
<body>

<div id="container">

</div>

<script>
    /* Created on 20180719 */

    /**~~~~~~~~~~~~~~~~~~~~~~~~~~ 数组去重-Start ~~~~~~~~~~~~~~~~~~~~~~~~~~**/

    // 数组去重 unique /juː'niːk/ adj. 唯一的，独一无二的
    function unique(arr) {
        const temporary = [];
        /*for (let i = 0; i < arr.length; i++) {
            if (temporary.indexOf(arr[i]) === -1) {
                temporary.push(arr[i]);
            }
        }*/
        arr.forEach(function (item) {
            if (temporary.indexOf(item) === -1) {
                temporary.push(item);
            }
        });
        return temporary;
    }

    function unique2(arr) {
        return [...new Set(arr)];
    }

    function unique3(arr) {
        // filter() ：对数组中的每一项运行给定函数，返回该函数会返回 true 的项组成的数组。
        return arr.filter((item, index, array) => {
            // console.log("index", index);
            // console.log("item", item);
            // console.log("array.lastIndexOf(item)", array.lastIndexOf(item));

            // 数组的 lastIndexOf(): 从数组的末尾向开头开始查找
            return index === array.lastIndexOf(item);
        })
    }

    /** 注: 双(多)数组去重，第一步把数组用 concat() 合并才是最合理的  */

    console.dir(unique([1, 1, 3, 5, 3, 2, 6, 1]));
    console.log(unique2([1, 1, 3, 5, 3, 2, 6, 1]));
    console.log(unique3(["a", "d", "f", "b", "d", "f", "a", "c"])); //  ["b", "d", "f", "a", "c"]

    /**~~~~~~~~~~~~~~~~~~~~~~~~~~ 数组去重-Over ~~~~~~~~~~~~~~~~~~~~~~~~~~**/



    /**~~~~~~~~~~~~~~~~~~~~~~~~~~ 斐波那契数列-Start ~~~~~~~~~~~~~~~~~~~~~~~~~~**/
    // 斐波那契数列
    function fibonacci1(n) {
        console.log("n", n);
        if (n === 1 || n === 2) return 1;
        return fibonacci1(n - 1) + fibonacci1(n - 2)
    }
    console.log(fibonacci1(10));  // 輸出？

    function fibonacci2(n) {
        let n1 = 1;
        n2 = 1;
        sum = 1;
        for (let i = 3; i <= n; i++) {
            sum = n1 + n2;
            n1 = n2;
            n2 = sum
        }
        return sum
    }

    // 尾递归调用
    function fibonacci3(n) {
        return function (fn) {
            return fn(n, 0, 1, fn)
        }((n, ret1, ret2, f) => {
            if (n === 0) return ret1;
            return f(n - 1, ret2, ret1 + ret2, f)
        })
    }


    console.log(fibonacci2(10));
    console.log(fibonacci3(10));
    /**~~~~~~~~~~~~~~~~~~~~~~~~~~ 斐波那契数列-Over ~~~~~~~~~~~~~~~~~~~~~~~~~~**/


</script>
</body>
</html>