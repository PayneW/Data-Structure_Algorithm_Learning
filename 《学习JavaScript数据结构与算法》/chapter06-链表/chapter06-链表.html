<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>chapter06-链表</title>
</head>
<body>
    <script>
        function defaultEquals(a, b) {
            return a === b;
        }
        class Node {
            constructor(element, next) {
                this.element = element;
                this.next = next;
            }
        }
        // class LinkedList {
        //     constructor(equalsFn = defaultEquals) {
        //         this.equalsFn = equalsFn;
        //         this.count = 0;
        //         this.head = undefined;
        //     }
        //     push(element) {
        //         const node = new Node(element); // {1}
        //         let current;    // {2}
        //         if (this.head == null) {    // {3}
        //             // catches null && undefined
        //             // - 让 head 指向 node 元素
        //             this.head = node;
        //             console.log("node:");
        //             console.log(node);
        //             console.log("------");
        //         } else {
        //             current = this.head;
        //             while (current.next != null) {
        //                 current = current.next;
        //             }
        //             current.next = node;
        //         }
        //         this.count++;
        //     }

        //     // - P99
        //     removeAt(index) {
        //         // - 检查越界值
        //         if (index >= 0 && index < this.count) {
        //             let current = this.head;

        //             // - 移除第一项
        //             if (index === 0) {
        //                 this.head = current.next;
        //             } else {
        //                 let previous;
        //                 for (let i = 0; i < index; i++) {
        //                     previous = current;
        //                     current = current.next;
        //                 }
        //                 // - 将 previous 与 current 的下一项链接起来; 跳过 current,
        //                 //   从而移除它
        //                 previous.next = current.next;
        //             }
        //             this.count--;
        //             return current.element;
        //         }
        //         return undefined;
        //     }
        // }





        class LinkedList {
            constructor(equalsFn = defaultEquals) {
                this.equalsFn = equalsFn;
                this.count = 0;
                this.head = undefined;
            }
            push(element) {
                const node = new Node(element); // {1}
                // - current: 指向链表中 current (当前) 项的变量.
                let current;    // {2}
                if (this.head == null) {    // {3}
                    // catches null && undefined
                    // - 把要添加的 node (节点实例) 赋值给 head.
                    this.head = node;
                    console.log(this.head);
                } else {
                    // - Note: 当第 2 次调用 push() 方法时 this.head 已经是一个
                    //   Node 构造函数的实例, 输出为:
                    //   `Node {element: 15, next: undefined}`
                    current = this.head;
                    while (current.next != null) {
                        current = current.next;
                    }
                    current.next = node;
                }
                this.count++;
            }
            getElementAt(index) {
                if (index >= 0 && index <= this.count) {
                    let node = this.head;
                    for (let i = 0; i < index && node != null; i++) {
                        node = node.next;
                    }
                    return node;
                }
                return undefined;
            }
            insert(element, index) {
                if (index >= 0 && index <= this.count) {
                    const node = new Node(element);
                    if (index === 0) {
                        const current = this.head;
                        node.next = current;
                        this.head = node;
                    } else {
                        const previous = this.getElementAt(index - 1);
                        node.next = previous.next;
                        previous.next = node;
                    }
                    this.count++;
                    return true;
                }
                return false;
            }
            removeAt(index) {
                if (index >= 0 && index < this.count) {
                    let current = this.head;
                    if (index === 0) {
                        this.head = current.next;
                    } else {
                        const previous = this.getElementAt(index - 1);
                        current = previous.next;
                        previous.next = current.next;
                    }
                    this.count--;
                    return current.element;
                }
                return undefined;
            }
            remove(element) {
                const index = this.indexOf(element);
                return this.removeAt(index);
            }
            indexOf(element) {
                let current = this.head;
                for (let i = 0; i < this.size() && current != null; i++) {
                    if (this.equalsFn(element, current.element)) {
                        return i;
                    }
                    current = current.next;
                }
                return -1;
            }
            isEmpty() {return this.size() === 0;}
            size() {return this.count;}
            getHead() {return this.head;}
            clear() {
                this.head = undefined;
                this.count = 0;
            }
            toString() {
                if (this.head == null) {
                    return '';
                }
                let objString = `${this.head.element}`;
                let current = this.head.next;
                for (let i = 1; i < this.size() && current != null; i++) {
                    objString = `${objString},${current.element}`;
                    current = current.next;
                }
                return objString;
            }
        }

        const list = new LinkedList();
        list.push(15);
        list.push(10);
        list.push(5);
        // console.log("list:");
        // console.log(list);
        // console.log(list.toString());
    </script>
</body>
</html>